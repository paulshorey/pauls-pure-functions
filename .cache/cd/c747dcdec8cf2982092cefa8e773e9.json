{"id":"KN53","dependencies":[{"name":"/srv/public/files/universal-common-scripts/package.json","includedInParent":true,"mtime":1605471894880}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.aggregate_req_body_query=void 0;var e=function(e){var r={};if(e.body&&(r=e.body),e.query)for(var i in e.query){var t=e.query[i];if(0!==t){if(t&&(t=decodeURIComponent(t).trim()))if(\"undefined\"!==t)if(\"null\"!==t)if(\"true\"!==t)if(\"false\"!==t){if(['\"',\"{\",\"[\"].includes(t[0]))try{t=JSON.parse(t)}catch(u){t=\"\"}r[i]=t}else r[i]=!1;else r[i]=!0;else r[i]=\"null\";else r[i]=\"undefined\"}else r[i]=0}return r};exports.aggregate_req_body_query=e;"},"sourceMaps":{"js":{"mappings":[{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":0}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":13}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":20}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":35}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":43}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":56}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":57}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":64}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":68}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":76}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":106}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":108}},{"source":"req.js","name":"aggregate_req_body_query","original":{"line":10,"column":13},"generated":{"line":1,"column":112}},{"source":"req.js","original":{"line":10,"column":40},"generated":{"line":1,"column":114}},{"source":"req.js","name":"req","original":{"line":10,"column":50},"generated":{"line":1,"column":123}},{"source":"req.js","name":"query","original":{"line":11,"column":6},"generated":{"line":1,"column":126}},{"source":"req.js","name":"query","original":{"line":11,"column":6},"generated":{"line":1,"column":130}},{"source":"req.js","original":{"line":11,"column":14},"generated":{"line":1,"column":132}},{"source":"req.js","name":"req","original":{"line":17,"column":6},"generated":{"line":1,"column":135}},{"source":"req.js","name":"req","original":{"line":13,"column":6},"generated":{"line":1,"column":138}},{"source":"req.js","name":"body","original":{"line":13,"column":10},"generated":{"line":1,"column":140}},{"source":"req.js","name":"query","original":{"line":14,"column":4},"generated":{"line":1,"column":147}},{"source":"req.js","name":"req","original":{"line":14,"column":12},"generated":{"line":1,"column":149}},{"source":"req.js","name":"body","original":{"line":14,"column":16},"generated":{"line":1,"column":151}},{"source":"req.js","name":"req","original":{"line":17,"column":6},"generated":{"line":1,"column":157}},{"source":"req.js","name":"query","original":{"line":17,"column":10},"generated":{"line":1,"column":159}},{"source":"req.js","original":{"line":18,"column":9},"generated":{"line":1,"column":165}},{"source":"req.js","original":{"line":18,"column":9},"generated":{"line":1,"column":169}},{"source":"req.js","name":"key","original":{"line":18,"column":13},"generated":{"line":1,"column":173}},{"source":"req.js","name":"req","original":{"line":18,"column":20},"generated":{"line":1,"column":178}},{"source":"req.js","name":"query","original":{"line":18,"column":24},"generated":{"line":1,"column":180}},{"source":"req.js","original":{"line":18,"column":31},"generated":{"line":1,"column":186}},{"source":"req.js","name":"val","original":{"line":19,"column":10},"generated":{"line":1,"column":187}},{"source":"req.js","name":"val","original":{"line":19,"column":10},"generated":{"line":1,"column":191}},{"source":"req.js","name":"req","original":{"line":19,"column":16},"generated":{"line":1,"column":193}},{"source":"req.js","name":"query","original":{"line":19,"column":20},"generated":{"line":1,"column":195}},{"source":"req.js","name":"key","original":{"line":19,"column":26},"generated":{"line":1,"column":201}},{"source":"req.js","name":"val","original":{"line":20,"column":10},"generated":{"line":1,"column":204}},{"source":"req.js","original":{"line":20,"column":18},"generated":{"line":1,"column":207}},{"source":"req.js","name":"val","original":{"line":20,"column":10},"generated":{"line":1,"column":211}},{"source":"req.js","original":{"line":24,"column":10},"generated":{"line":1,"column":214}},{"source":"req.js","name":"val","original":{"line":24,"column":11},"generated":{"line":1,"column":217}},{"source":"req.js","name":"val","original":{"line":25,"column":6},"generated":{"line":1,"column":221}},{"source":"req.js","name":"decodeURIComponent","original":{"line":25,"column":12},"generated":{"line":1,"column":223}},{"source":"req.js","name":"val","original":{"line":25,"column":31},"generated":{"line":1,"column":242}},{"source":"req.js","name":"trim","original":{"line":25,"column":36},"generated":{"line":1,"column":245}},{"source":"req.js","name":"val","original":{"line":27,"column":10},"generated":{"line":1,"column":253}},{"source":"req.js","original":{"line":27,"column":18},"generated":{"line":1,"column":256}},{"source":"req.js","name":"val","original":{"line":27,"column":10},"generated":{"line":1,"column":270}},{"source":"req.js","name":"val","original":{"line":31,"column":10},"generated":{"line":1,"column":272}},{"source":"req.js","original":{"line":31,"column":18},"generated":{"line":1,"column":275}},{"source":"req.js","name":"val","original":{"line":31,"column":10},"generated":{"line":1,"column":284}},{"source":"req.js","name":"val","original":{"line":35,"column":10},"generated":{"line":1,"column":286}},{"source":"req.js","original":{"line":35,"column":18},"generated":{"line":1,"column":289}},{"source":"req.js","name":"val","original":{"line":35,"column":10},"generated":{"line":1,"column":298}},{"source":"req.js","name":"val","original":{"line":39,"column":10},"generated":{"line":1,"column":300}},{"source":"req.js","original":{"line":39,"column":18},"generated":{"line":1,"column":303}},{"source":"req.js","name":"val","original":{"line":39,"column":10},"generated":{"line":1,"column":313}},{"source":"req.js","name":"val","original":{"line":39,"column":10},"generated":{"line":1,"column":315}},{"source":"req.js","original":{"line":43,"column":10},"generated":{"line":1,"column":316}},{"source":"req.js","original":{"line":43,"column":10},"generated":{"line":1,"column":319}},{"source":"req.js","original":{"line":43,"column":11},"generated":{"line":1,"column":320}},{"source":"req.js","original":{"line":43,"column":16},"generated":{"line":1,"column":324}},{"source":"req.js","original":{"line":43,"column":21},"generated":{"line":1,"column":328}},{"source":"req.js","name":"includes","original":{"line":43,"column":26},"generated":{"line":1,"column":333}},{"source":"req.js","name":"val","original":{"line":43,"column":35},"generated":{"line":1,"column":342}},{"source":"req.js","original":{"line":43,"column":39},"generated":{"line":1,"column":344}},{"source":"req.js","original":{"line":44,"column":12},"generated":{"line":1,"column":348}},{"source":"req.js","name":"val","original":{"line":45,"column":10},"generated":{"line":1,"column":352}},{"source":"req.js","name":"JSON","original":{"line":45,"column":16},"generated":{"line":1,"column":354}},{"source":"req.js","name":"parse","original":{"line":45,"column":21},"generated":{"line":1,"column":359}},{"source":"req.js","name":"val","original":{"line":45,"column":27},"generated":{"line":1,"column":365}},{"source":"req.js","original":{"line":46,"column":10},"generated":{"line":1,"column":368}},{"source":"req.js","name":"e","original":{"line":46,"column":17},"generated":{"line":1,"column":374}},{"source":"req.js","name":"val","original":{"line":47,"column":10},"generated":{"line":1,"column":377}},{"source":"req.js","original":{"line":47,"column":16},"generated":{"line":1,"column":379}},{"source":"req.js","name":"query","original":{"line":50,"column":6},"generated":{"line":1,"column":382}},{"source":"req.js","name":"key","original":{"line":50,"column":12},"generated":{"line":1,"column":384}},{"source":"req.js","name":"val","original":{"line":50,"column":19},"generated":{"line":1,"column":387}},{"source":"req.js","name":"query","original":{"line":40,"column":8},"generated":{"line":1,"column":394}},{"source":"req.js","name":"key","original":{"line":40,"column":14},"generated":{"line":1,"column":396}},{"source":"req.js","original":{"line":40,"column":21},"generated":{"line":1,"column":400}},{"source":"req.js","name":"query","original":{"line":36,"column":8},"generated":{"line":1,"column":407}},{"source":"req.js","name":"key","original":{"line":36,"column":14},"generated":{"line":1,"column":409}},{"source":"req.js","original":{"line":36,"column":21},"generated":{"line":1,"column":413}},{"source":"req.js","name":"query","original":{"line":32,"column":8},"generated":{"line":1,"column":420}},{"source":"req.js","name":"key","original":{"line":32,"column":14},"generated":{"line":1,"column":422}},{"source":"req.js","original":{"line":32,"column":21},"generated":{"line":1,"column":425}},{"source":"req.js","name":"query","original":{"line":28,"column":8},"generated":{"line":1,"column":437}},{"source":"req.js","name":"key","original":{"line":28,"column":14},"generated":{"line":1,"column":439}},{"source":"req.js","original":{"line":28,"column":21},"generated":{"line":1,"column":442}},{"source":"req.js","name":"query","original":{"line":21,"column":8},"generated":{"line":1,"column":459}},{"source":"req.js","name":"key","original":{"line":21,"column":14},"generated":{"line":1,"column":461}},{"source":"req.js","original":{"line":21,"column":21},"generated":{"line":1,"column":464}},{"source":"req.js","name":"query","original":{"line":54,"column":9},"generated":{"line":1,"column":466}},{"source":"req.js","name":"query","original":{"line":54,"column":9},"generated":{"line":1,"column":473}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":476}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":484}},{"source":"req.js","original":{"line":10,"column":7},"generated":{"line":1,"column":509}}],"sources":{"req.js":"/**\n * Parse and combine POST data and URL params into JavaScript object\n * @param req {object} - IMPORTANT: does not have to be real api request. Can be simple object.\n * @param req.body {object} - key/value pairs, already parsed and ready to use\n * @param req.query {object} - object of key/value pairs from URL query string\n *    This function will decodeURIComponent then parse each value.\n *    These req.query values will override values from req.body!\n * @returns {{}} - combined keys/values. Original request object will NOT be modified.\n */\nexport const aggregate_req_body_query = function (req) {\n  let query = {}\n  // body (POST data)\n  if (req.body) {\n    query = req.body\n  }\n  // query (URL parameters)\n  if (req.query) {\n    for (let key in req.query) {\n      let val = req.query[key]\n      if (val === 0) {\n        query[key] = 0\n        continue\n      }\n      if (!val) continue\n      val = decodeURIComponent(val).trim()\n      if (!val) continue\n      if (val === \"undefined\") {\n        query[key] = \"undefined\"\n        continue\n      }\n      if (val === \"null\") {\n        query[key] = \"null\"\n        continue\n      }\n      if (val === \"true\") {\n        query[key] = true\n        continue\n      }\n      if (val === \"false\") {\n        query[key] = false\n        continue\n      }\n      if (['\"', \"{\", \"[\"].includes(val[0])) {\n        try {\n          val = JSON.parse(val)\n        } catch (e) {\n          val = \"\"\n        }\n      }\n      query[key] = val\n    }\n  }\n  // combined\n  return query\n}\n"},"lineCount":null}},"error":null,"hash":"5bf5aee671ae2e7dedf4fc4ec1e9f148","cacheData":{"env":{}}}