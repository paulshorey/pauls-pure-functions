{"id":"hTGs","dependencies":[{"name":"/srv/public/files/universal-common-scripts/package.json","includedInParent":true,"mtime":1605471894880}],"generated":{"js":"\"use strict\";function i(i,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r={min_rating:null,max_rating:null};for(var e in r.ratings=n,n){var s=n[e];(null===r.min_rating||s<r.min_rating)&&(r.min_rating=s),(null===r.max_rating||s>r.max_rating)&&(r.max_rating=s)}for(var _ in r.delta_rating=r.max_rating-r.min_rating,r.median_rating=r.min_rating+r.delta_rating/2,r.min_index=0,r.max_index=i.length-1,r.indexes={},i){var d=i[_];r.indexes[d]=_}return r.delta_index=r.max_index-r.min_index,r.multiply_position=a,i.sort(t.bind(r))}function t(i,t){var n=(this.delta_rating-(this.max_rating-(void 0!==this.ratings[i]?this.ratings[i]:this.median_rating)))/this.delta_rating,a=(this.delta_rating-(this.max_rating-(void 0!==this.ratings[t]?this.ratings[t]:this.median_rating)))/this.delta_rating,r=(this.max_index-this.indexes[i])/this.delta_index*this.multiply_position;return a+(this.max_index-this.indexes[t])/this.delta_index*this.multiply_position-(n+r)}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=i;"},"sourceMaps":{"js":{"mappings":[{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":0}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":13,"column":15},"generated":{"line":1,"column":13}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"asort_strings_by_rating_and_position","original":{"line":13,"column":24},"generated":{"line":1,"column":22}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"arr","original":{"line":14,"column":2},"generated":{"line":1,"column":24}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"ratings","original":{"line":15,"column":2},"generated":{"line":1,"column":26}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"multiply_position","original":{"line":16,"column":2},"generated":{"line":1,"column":29}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"multiply_position","original":{"line":16,"column":2},"generated":{"line":1,"column":33}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":16,"column":22},"generated":{"line":1,"column":35}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":16,"column":22},"generated":{"line":1,"column":45}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":16,"column":22},"generated":{"line":1,"column":52}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":16,"column":22},"generated":{"line":1,"column":60}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":16,"column":22},"generated":{"line":1,"column":64}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":16,"column":22},"generated":{"line":1,"column":74}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":16,"column":22},"generated":{"line":1,"column":77}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":16,"column":22},"generated":{"line":1,"column":87}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":16,"column":22},"generated":{"line":1,"column":90}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":18,"column":6},"generated":{"line":1,"column":92}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":18,"column":13},"generated":{"line":1,"column":94}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":21,"column":2},"generated":{"line":1,"column":95}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":21,"column":20},"generated":{"line":1,"column":106}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":22,"column":2},"generated":{"line":1,"column":111}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":22,"column":20},"generated":{"line":1,"column":122}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":24,"column":7},"generated":{"line":1,"column":128}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":24,"column":7},"generated":{"line":1,"column":132}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"str","original":{"line":24,"column":11},"generated":{"line":1,"column":136}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":23,"column":2},"generated":{"line":1,"column":141}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"ratings","original":{"line":23,"column":7},"generated":{"line":1,"column":143}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"ratings","original":{"line":23,"column":17},"generated":{"line":1,"column":151}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"ratings","original":{"line":24,"column":18},"generated":{"line":1,"column":153}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":24,"column":27},"generated":{"line":1,"column":155}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"rate","original":{"line":25,"column":8},"generated":{"line":1,"column":156}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"rate","original":{"line":25,"column":8},"generated":{"line":1,"column":160}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"ratings","original":{"line":25,"column":15},"generated":{"line":1,"column":162}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"str","original":{"line":25,"column":23},"generated":{"line":1,"column":164}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":27,"column":28},"generated":{"line":1,"column":168}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":27,"column":8},"generated":{"line":1,"column":175}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"min_rating","original":{"line":27,"column":13},"generated":{"line":1,"column":177}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"rate","original":{"line":27,"column":36},"generated":{"line":1,"column":189}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":27,"column":43},"generated":{"line":1,"column":191}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"min_rating","original":{"line":27,"column":48},"generated":{"line":1,"column":193}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":28,"column":6},"generated":{"line":1,"column":207}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"min_rating","original":{"line":28,"column":11},"generated":{"line":1,"column":209}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"rate","original":{"line":28,"column":24},"generated":{"line":1,"column":220}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":30,"column":28},"generated":{"line":1,"column":224}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":30,"column":8},"generated":{"line":1,"column":231}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"max_rating","original":{"line":30,"column":13},"generated":{"line":1,"column":233}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"rate","original":{"line":30,"column":36},"generated":{"line":1,"column":245}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":30,"column":43},"generated":{"line":1,"column":247}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"max_rating","original":{"line":30,"column":48},"generated":{"line":1,"column":249}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":31,"column":6},"generated":{"line":1,"column":263}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"max_rating","original":{"line":31,"column":11},"generated":{"line":1,"column":265}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"rate","original":{"line":31,"column":24},"generated":{"line":1,"column":276}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":41,"column":7},"generated":{"line":1,"column":279}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":41,"column":7},"generated":{"line":1,"column":283}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"i","original":{"line":41,"column":11},"generated":{"line":1,"column":287}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":34,"column":2},"generated":{"line":1,"column":292}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"delta_rating","original":{"line":34,"column":7},"generated":{"line":1,"column":294}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":34,"column":22},"generated":{"line":1,"column":307}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"max_rating","original":{"line":34,"column":27},"generated":{"line":1,"column":309}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":34,"column":40},"generated":{"line":1,"column":320}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"min_rating","original":{"line":34,"column":45},"generated":{"line":1,"column":322}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":35,"column":2},"generated":{"line":1,"column":333}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"median_rating","original":{"line":35,"column":7},"generated":{"line":1,"column":335}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":35,"column":23},"generated":{"line":1,"column":349}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"min_rating","original":{"line":35,"column":28},"generated":{"line":1,"column":351}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":35,"column":41},"generated":{"line":1,"column":362}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"delta_rating","original":{"line":35,"column":46},"generated":{"line":1,"column":364}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":35,"column":61},"generated":{"line":1,"column":377}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":38,"column":2},"generated":{"line":1,"column":379}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"min_index","original":{"line":38,"column":7},"generated":{"line":1,"column":381}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":38,"column":19},"generated":{"line":1,"column":391}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":39,"column":2},"generated":{"line":1,"column":393}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"max_index","original":{"line":39,"column":7},"generated":{"line":1,"column":395}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"arr","original":{"line":39,"column":19},"generated":{"line":1,"column":405}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"length","original":{"line":39,"column":23},"generated":{"line":1,"column":407}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":39,"column":32},"generated":{"line":1,"column":414}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":40,"column":2},"generated":{"line":1,"column":416}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"indexes","original":{"line":40,"column":7},"generated":{"line":1,"column":418}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":40,"column":17},"generated":{"line":1,"column":426}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"arr","original":{"line":41,"column":16},"generated":{"line":1,"column":429}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":41,"column":21},"generated":{"line":1,"column":431}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"string","original":{"line":43,"column":8},"generated":{"line":1,"column":432}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"string","original":{"line":43,"column":8},"generated":{"line":1,"column":436}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"arr","original":{"line":43,"column":17},"generated":{"line":1,"column":438}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"i","original":{"line":43,"column":21},"generated":{"line":1,"column":440}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":44,"column":4},"generated":{"line":1,"column":443}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"indexes","original":{"line":44,"column":9},"generated":{"line":1,"column":445}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"string","original":{"line":44,"column":17},"generated":{"line":1,"column":453}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"i","original":{"line":44,"column":27},"generated":{"line":1,"column":456}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"arr","original":{"line":50,"column":9},"generated":{"line":1,"column":458}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":46,"column":2},"generated":{"line":1,"column":465}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"delta_index","original":{"line":46,"column":7},"generated":{"line":1,"column":467}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":46,"column":21},"generated":{"line":1,"column":479}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"max_index","original":{"line":46,"column":26},"generated":{"line":1,"column":481}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":46,"column":38},"generated":{"line":1,"column":491}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"min_index","original":{"line":46,"column":43},"generated":{"line":1,"column":493}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":47,"column":2},"generated":{"line":1,"column":503}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"multiply_position","original":{"line":47,"column":7},"generated":{"line":1,"column":505}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"multiply_position","original":{"line":47,"column":27},"generated":{"line":1,"column":523}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"arr","original":{"line":50,"column":9},"generated":{"line":1,"column":525}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"sort","original":{"line":50,"column":13},"generated":{"line":1,"column":527}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"asort_strings_by_rating_and_position__helper","original":{"line":50,"column":18},"generated":{"line":1,"column":532}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"bind","original":{"line":50,"column":63},"generated":{"line":1,"column":534}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"that","original":{"line":50,"column":68},"generated":{"line":1,"column":539}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":54,"column":0},"generated":{"line":1,"column":543}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"asort_strings_by_rating_and_position__helper","original":{"line":54,"column":9},"generated":{"line":1,"column":552}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"a","original":{"line":54,"column":54},"generated":{"line":1,"column":554}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"b","original":{"line":54,"column":57},"generated":{"line":1,"column":556}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"a_rating","original":{"line":58,"column":6},"generated":{"line":1,"column":559}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"a_rating","original":{"line":58,"column":6},"generated":{"line":1,"column":563}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":59,"column":5},"generated":{"line":1,"column":566}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"delta_rating","original":{"line":59,"column":10},"generated":{"line":1,"column":571}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":60,"column":7},"generated":{"line":1,"column":585}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"max_rating","original":{"line":60,"column":12},"generated":{"line":1,"column":590}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":60,"column":53},"generated":{"line":1,"column":607}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":60,"column":33},"generated":{"line":1,"column":611}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"ratings","original":{"line":60,"column":38},"generated":{"line":1,"column":616}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"a","original":{"line":60,"column":46},"generated":{"line":1,"column":624}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":60,"column":67},"generated":{"line":1,"column":627}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"ratings","original":{"line":60,"column":72},"generated":{"line":1,"column":632}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"a","original":{"line":60,"column":80},"generated":{"line":1,"column":640}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":60,"column":85},"generated":{"line":1,"column":643}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"median_rating","original":{"line":60,"column":90},"generated":{"line":1,"column":648}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":61,"column":4},"generated":{"line":1,"column":665}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"delta_rating","original":{"line":61,"column":9},"generated":{"line":1,"column":670}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"b_rating","original":{"line":62,"column":6},"generated":{"line":1,"column":683}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":63,"column":5},"generated":{"line":1,"column":686}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"delta_rating","original":{"line":63,"column":10},"generated":{"line":1,"column":691}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":64,"column":7},"generated":{"line":1,"column":705}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"max_rating","original":{"line":64,"column":12},"generated":{"line":1,"column":710}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":64,"column":53},"generated":{"line":1,"column":727}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":64,"column":33},"generated":{"line":1,"column":731}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"ratings","original":{"line":64,"column":38},"generated":{"line":1,"column":736}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"b","original":{"line":64,"column":46},"generated":{"line":1,"column":744}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":64,"column":67},"generated":{"line":1,"column":747}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"ratings","original":{"line":64,"column":72},"generated":{"line":1,"column":752}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"b","original":{"line":64,"column":80},"generated":{"line":1,"column":760}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":64,"column":85},"generated":{"line":1,"column":763}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"median_rating","original":{"line":64,"column":90},"generated":{"line":1,"column":768}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":65,"column":4},"generated":{"line":1,"column":785}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"delta_rating","original":{"line":65,"column":9},"generated":{"line":1,"column":790}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"a_index","original":{"line":71,"column":6},"generated":{"line":1,"column":803}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":71,"column":18},"generated":{"line":1,"column":806}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"max_index","original":{"line":71,"column":23},"generated":{"line":1,"column":811}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":71,"column":35},"generated":{"line":1,"column":821}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"indexes","original":{"line":71,"column":40},"generated":{"line":1,"column":826}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"a","original":{"line":71,"column":48},"generated":{"line":1,"column":834}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":71,"column":54},"generated":{"line":1,"column":838}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"delta_index","original":{"line":71,"column":59},"generated":{"line":1,"column":843}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":71,"column":74},"generated":{"line":1,"column":855}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"multiply_position","original":{"line":71,"column":79},"generated":{"line":1,"column":860}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"b_rating","original":{"line":76,"column":9},"generated":{"line":1,"column":878}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"b_rating","original":{"line":76,"column":9},"generated":{"line":1,"column":885}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":72,"column":18},"generated":{"line":1,"column":888}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"max_index","original":{"line":72,"column":23},"generated":{"line":1,"column":893}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":72,"column":35},"generated":{"line":1,"column":903}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"indexes","original":{"line":72,"column":40},"generated":{"line":1,"column":908}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"b","original":{"line":72,"column":48},"generated":{"line":1,"column":916}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":72,"column":54},"generated":{"line":1,"column":920}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"delta_index","original":{"line":72,"column":59},"generated":{"line":1,"column":925}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":72,"column":74},"generated":{"line":1,"column":937}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"multiply_position","original":{"line":72,"column":79},"generated":{"line":1,"column":942}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"a_rating","original":{"line":76,"column":31},"generated":{"line":1,"column":961}},{"source":"asort_strings/asort_by_rating_and_position.js","name":"a_index","original":{"line":76,"column":42},"generated":{"line":1,"column":963}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":966}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":973}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":988}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":996}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":1009}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":1010}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":1017}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":1021}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":1029}},{"source":"asort_strings/asort_by_rating_and_position.js","original":{"line":77,"column":1},"generated":{"line":1,"column":1037}}],"sources":{"asort_strings/asort_by_rating_and_position.js":"/**\n * Sort array of strings by separate dictionary of [{string:rating},], and\n * also by position in array. Items at front of array will be rated higher.\n * @param arr {Array.<String>} - array of strings\n * @param ratings {object} - dictionary of {string:rating}\n *      ratings does not have to contain an entry for each arr item\n *          if missing, will be given default 0\n *      likewise, it may contain more entries than arr,\n *          extras will be ignored\n * @param multiply_position {number} - make position x times more important than rating\n * @return {Array.<String>} - array of strings\n */\nexport default function asort_strings_by_rating_and_position(\n  arr,\n  ratings,\n  multiply_position = 1\n) {\n  let that = {}\n\n  // ratings\n  that.min_rating = null\n  that.max_rating = null\n  that.ratings = ratings\n  for (let str in ratings) {\n    let rate = ratings[str]\n    // compare ratings to each other\n    if (that.min_rating === null || rate < that.min_rating) {\n      that.min_rating = rate\n    }\n    if (that.max_rating === null || rate > that.max_rating) {\n      that.max_rating = rate\n    }\n  }\n  that.delta_rating = that.max_rating - that.min_rating\n  that.median_rating = that.min_rating + that.delta_rating / 2\n\n  // prepare position indexes\n  that.min_index = 0\n  that.max_index = arr.length - 1\n  that.indexes = {}\n  for (let i in arr) {\n    // count up - first item = 0, last item = (length-1)\n    let string = arr[i]\n    that.indexes[string] = i\n  }\n  that.delta_index = that.max_index - that.min_index\n  that.multiply_position = multiply_position\n\n  // sort\n  return arr.sort(asort_strings_by_rating_and_position__helper.bind(that))\n}\n\n// helper function:\nfunction asort_strings_by_rating_and_position__helper(a, b) {\n  // higher == better\n  // normalized to 0-1 range\n  // highest rating gets 1, lowest rating gets 0\n  let a_rating =\n    (this.delta_rating -\n      (this.max_rating - (typeof this.ratings[a] !== \"undefined\" ? this.ratings[a] : this.median_rating))) /\n    this.delta_rating\n  let b_rating =\n    (this.delta_rating -\n      (this.max_rating - (typeof this.ratings[b] !== \"undefined\" ? this.ratings[b] : this.median_rating))) /\n    this.delta_rating\n\n  // higher == better\n  // normalized to 0-1 range\n  // lowest index gets 1, highest index gets 0\n  // (multiply_position to make position score more important than rating score)\n  let a_index = ((this.max_index - this.indexes[a]) / this.delta_index) * this.multiply_position\n  let b_index = ((this.max_index - this.indexes[b]) / this.delta_index) * this.multiply_position\n\n  // combine the two\n  // if b is higher, then sort it closer to front of array compared to a\n  return b_rating + b_index - (a_rating + a_index)\n}\n"},"lineCount":null}},"error":null,"hash":"8661a0dec1c87b88509458266d4bab26","cacheData":{"env":{}}}